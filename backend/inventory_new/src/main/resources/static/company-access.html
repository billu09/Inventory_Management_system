<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" /><title>Company Access</title>
  <style>
    body{font-family:Arial;background:#eef2f3;display:flex;align-items:center;justify-content:center;height:100vh}
    .box{background:#fff;padding:28px;border-radius:10px;width:420px;box-shadow:0 6px 18px rgba(0,0,0,0.08)}
    input{width:100%;padding:10px;margin:8px 0;border:1px solid #ddd;border-radius:6px}
    button{width:100%;padding:12px;border:0;border-radius:8px;margin-top:8px;cursor:pointer;background:#2563eb;color:white}
    small{display:block;margin-top:10px;color:#555}
  </style>
</head>
<body>
  <div class="box">
    <h3>Company Signup</h3>
    <input id="signupName" placeholder="Company name" />
    <input id="signupEmail" placeholder="Email" />
    <input id="signupPassword" placeholder="Password" type="password" />
    <button onclick="companySignup()">Sign up</button>

    <hr />

    <h3>Company Login</h3>
    <input id="loginEmail" placeholder="Email" />
    <input id="loginPassword" placeholder="Password" type="password" />
    <button onclick="companyLogin()">Login</button>

    <small id="msg"></small>
  </div>

<script>
const API = 'http://localhost:8080/api/auth';

async function companySignup(){
  const name = document.getElementById('signupName').value;
  const email = document.getElementById('signupEmail').value;
  const password = document.getElementById('signupPassword').value;
  const res = await fetch(API + '/company/signup', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({name,email,password})
  });
  const j = await res.json();
  document.getElementById('msg').innerText = j.message || JSON.stringify(j);
}

async function companyLogin(){
  const email = document.getElementById('loginEmail').value;
  const password = document.getElementById('loginPassword').value;
  const res = await fetch(API + '/login', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({username: email, password})
  });
  const j = await res.json();
  if (res.ok && j.token){
    localStorage.setItem('token', j.token);
    document.getElementById('msg').innerText = 'Login successful. Token saved.';
    // Redirect to company dashboard (example)
    window.location.href = 'company-dashboard.html';
  } else {
    document.getElementById('msg').innerText = j.error || JSON.stringify(j);
  }
}
</script>
</body>
</html>
